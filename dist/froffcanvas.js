(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Froffcanvas = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict'

/**
 * @param {string} panelSelector 	Off-canvas element
 * @param {string} toggleSelector 	Button with which to toggle the off-canvas state
 * @param {object} options			Object containing config overrides
 */
;
Object.defineProperty(exports, "__esModule", {
	value: true
});
var Froffcanvas = function Froffcanvas() {
	var panelSelector = arguments.length <= 0 || arguments[0] === undefined ? '.js-fr-offcanvas' : arguments[0];
	var toggleSelector = arguments.length <= 1 || arguments[1] === undefined ? '.js-fr-offcanvas-toggle' : arguments[1];

	var _ref = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];

	var _ref$activePanelClass = _ref.activePanelClass;
	var activePanelClass = _ref$activePanelClass === undefined ? 'fr-offcanvas--is-active' : _ref$activePanelClass;
	var _ref$readyClass = _ref.readyClass;
	var readyClass = _ref$readyClass === undefined ? 'has-fr-offcanvas' : _ref$readyClass;

	//	CONSTANTS
	var doc = document;
	var docEl = doc.documentElement;
	// const html = doc.getElementByTagName('html');
	var transitionEventSyntax = {
		transition: 'transitionend',
		WebkitTransition: 'webkitTransitionEnd',
		MozTransition: 'transitionend',
		OTransition: 'oTransitionEnd otransitionend'
	};

	//	SUPPORTS
	if (!'querySelector' in document || !'addEventListener' in window || !docEl.classList) return;

	//	SETUP
	var panel = doc.querySelector(panelSelector);
	var toggle = doc.querySelector(toggleSelector);
	var transitionEventName = 'transitionend';
	var docOverflow = {};

	//	UTILS
	function _defer(func) {
		//	wrapped in setTimeout to delay binding until previous rendering has completed
		if (typeof func === 'function') setTimeout(func, 0);
	}
	function _closest(el, fn) {
		// closest: http://clubmate.fi/jquerys-closest-function-and-pure-javascript-alternatives/
		return el && (fn(el) ? el : _closest(el.parentNode, fn));
	}
	function _getPropValue(el, prop) {
		//	return css property value
		return doc.defaultView.getComputedStyle(el, null).getPropertyValue(prop);
	}

	//	Cross-browser
	function _setTransitionEventPrefix() {
		//	loop through prefixes and return relevant event
		for (var prefix in transitionEventSyntax) {
			if (panel.style[prefix] !== undefined) return transitionEventSyntax[prefix];
		}
	}
	function _setDocOverflowProperty() {
		//	save document overflow properties to apply when closing panel
		docOverflow.overflow = _getPropValue(docEl, 'overflow');
		docOverflow.overflowY = _getPropValue(docEl, 'overflow-y');
	}

	//	A11y
	function _addA11y() {
		//	add aria-hidden attribute
		panel.setAttribute('aria-hidden', true);
	}
	function _removeA11y() {
		//	add aria-hidden attribute
		panel.removeAttribute('aria-hidden');
	}

	//	Events
	function _eventPointer() {
		var panelHidden = panel.getAttribute('aria-hidden') === 'true';
		if (panelHidden) {
			_showPanel();
		} else {
			_hidePanel();
		}
	}
	function _eventDocClick(e) {
		//	check if target is panel or child of
		var isPanel = e.target == panel;
		var isPanelChild = _closest(e.target, function (el) {
			if (el != doc) return el.classList.contains(panelSelector.substring(1));
		});
		if (!isPanel && !isPanelChild) _hidePanel();
	}
	function _eventDocKey(e) {
		//	esc key
		if (e.keyCode === 27) _hidePanel();
	}
	function _eventTransitionEnd(e) {
		//	set visibilty property to remove keyboard access
		panel.style.visibility = 'hidden';
		//	transition event not needed
		_unbindTransitionEnd();
	}

	//	Bindings
	function _bindPointer() {
		toggle.addEventListener('click', _eventPointer);
	}
	function _bindDocClick() {
		doc.addEventListener('click', _eventDocClick);
	}
	function _bindDocKey() {
		doc.addEventListener('keydown', _eventDocKey);
	}
	function _bindTransitionEnd() {
		panel.addEventListener(transitionEventName, _eventTransitionEnd);
	}

	//	Unbind
	function _unbindPointer() {
		toggle.removeEventListener('click', _eventPointer);
	}
	function _unbindDocClick() {
		doc.removeEventListener('click', _eventDocClick);
	}
	function _unbindDocKey() {
		doc.removeEventListener('keydown', _eventDocKey);
	}
	function _unbindTransitionEnd() {
		panel.removeEventListener(transitionEventName, _eventTransitionEnd);
	}

	//	Actions
	function _showPanel() {
		//	remove aria-hidden, add focus
		panel.setAttribute('aria-hidden', false);
		panel.setAttribute('tabindex', 0);
		panel.focus();
		//	set visibility to override any previous set style
		panel.style.visibility = 'visible';
		//	bind document close events
		_defer(_bindDocClick); // this isn't working for enter, works for space though. WTF.
		_defer(_bindDocKey);
		//	add active class
		panel.classList.add(activePanelClass);
		//	fix overflow to remove scroll when covering the entire viewport
		_hideDocOverflow();
	}
	function _hidePanel() {
		//	add aria-hidden, remove focus
		panel.setAttribute('aria-hidden', true);
		panel.setAttribute('tabindex', -1);
		panel.blur();
		//	bind transition end
		_bindTransitionEnd();
		//	unbind document events
		_unbindDocKey();
		_unbindDocClick();
		//	remove active class
		panel.classList.remove(activePanelClass);
		//	fix overflow to remove scroll when covering the entire viewport
		_resetDocOverflow();
	}
	function destroy() {
		//	remove attributes
		_removeA11y();
		//	unbind events
		_unbindPointer();
		_unbindDocClick();
		_unbindDocKey();
		//	remove reference
		docEl.classList.remove(readyClass);
	}
	function _resetDocOverflow() {
		//	loop through overflow properties and set value
		for (var prop in docOverflow) {
			docEl.style[prop] = docOverflow[prop];
		}
	}
	function _hideDocOverflow() {
		//	prevent scrolling document when panel open
		docEl.style.overflow = 'hidden';
	}

	//	INIT
	function _init() {
		if (panel) {
			_addA11y();
			_bindPointer();
			_setTransitionEventPrefix();
			_setDocOverflowProperty();
			docEl.classList.add(readyClass);
		}
	}
	_init();

	// REVEAL API
	return {
		destroy: destroy
	};
};

// module exports
exports.default = Froffcanvas;
module.exports = exports['default'];

},{}]},{},[1])(1)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJfY29tcG9uZW50cy9vZmZjYW52YXMvb2ZmY2FudmFzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7Ozs7Ozs7QUFBWSxDQUFDOzs7O0FBT2IsSUFBTSxXQUFXLEdBQUcsU0FBZCxXQUFXLEdBT2Q7S0FORCxhQUFhLHlEQUFHLGtCQUFrQjtLQUNsQyxjQUFjLHlEQUFHLHlCQUF5Qjs7a0VBSXRDLEVBQUU7O2tDQUZMLGdCQUFnQjtLQUFFLGdCQUFnQix5Q0FBRyx5QkFBeUI7NEJBQzlELFVBQVU7S0FBRSxVQUFVLG1DQUFHLGtCQUFrQjs7O0FBTTdDLEtBQU0sR0FBRyxHQUFHLFFBQVEsQ0FBQztBQUNyQixLQUFNLEtBQUssR0FBRyxHQUFHLENBQUMsZUFBZTs7QUFBQyxBQUVsQyxLQUFNLHFCQUFxQixHQUFHO0FBQzdCLFlBQVUsRUFBRSxlQUFlO0FBQzNCLGtCQUFnQixFQUFFLHFCQUFxQjtBQUN2QyxlQUFhLEVBQUUsZUFBZTtBQUM5QixhQUFXLEVBQUUsK0JBQStCO0VBQzVDOzs7QUFBQyxBQUlGLEtBQUksQ0FBQyxlQUFlLElBQUksUUFBUSxJQUFJLENBQUMsa0JBQWtCLElBQUksTUFBTSxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBRSxPQUFPOzs7QUFBQSxBQUk5RixLQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQzdDLEtBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxhQUFhLENBQUMsY0FBYyxDQUFDLENBQUM7QUFDL0MsS0FBSSxtQkFBbUIsR0FBRyxlQUFlLENBQUM7QUFDMUMsS0FBSSxXQUFXLEdBQUcsRUFBRTs7O0FBQUMsQUFJckIsVUFBUyxNQUFNLENBQUUsSUFBSSxFQUFFOztBQUV0QixNQUFJLE9BQU8sSUFBSSxLQUFLLFVBQVUsRUFBRSxVQUFVLENB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RTs7QUFBQyxBQUVyQixlQUFhLEVBQUUsQ0FBQztBQUNoQixpQkFBZSxFQUFFOztBQUFDLEFBRWxCLE9BQUssQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDOztBQUFDLEFBRXpDLG1CQUFpQixFQUFFLENBQUM7RUFDcEI7QUFDRCxVQUFTLE9BQU8sR0FBSTs7QUFFbkIsYUFBVyxFQUFFOztBQUFDLEFBRWQsZ0JBQWMsRUFBRSxDQUFDO0FBQ2pCLGlCQUFlLEVBQUUsQ0FBQztBQUNsQixlQUFhLEVBQUU7O0FBQUMsQUFFaEIsT0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUM7RUFDbkM7QUFDRCxVQUFTLGlCQUFpQixHQUFJOztBQUU3QixPQUFLLElBQUksSUFBSSxJQUFJLFdBQVcsRUFBRTtBQUM3QixRQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztHQUN0QztFQUNEO0FBQ0QsVUFBUyxnQkFBZ0IsR0FBSTs7QUFFNUIsT0FBSyxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO0VBQ2hDOzs7QUFBQSxBQUlELFVBQVMsS0FBSyxHQUFJO0FBQ2pCLE1BQUksS0FBSyxFQUFFO0FBQ1YsV0FBUSxFQUFFLENBQUM7QUFDWCxlQUFZLEVBQUUsQ0FBQztBQUNmLDRCQUF5QixFQUFFLENBQUM7QUFDNUIsMEJBQXVCLEVBQUUsQ0FBQztBQUMxQixRQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztHQUNoQztFQUNEO0FBQ0QsTUFBSyxFQUFFOzs7QUFBQyxBQUlSLFFBQU87QUFDTixTQUFPLEVBQVAsT0FBTztFQUNQLENBQUE7Q0FDRDs7O0FBQUEsa0JBSWMsV0FBVyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHBhbmVsU2VsZWN0b3IgXHRPZmYtY2FudmFzIGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b2dnbGVTZWxlY3RvciBcdEJ1dHRvbiB3aXRoIHdoaWNoIHRvIHRvZ2dsZSB0aGUgb2ZmLWNhbnZhcyBzdGF0ZVxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnNcdFx0XHRPYmplY3QgY29udGFpbmluZyBjb25maWcgb3ZlcnJpZGVzXG4gKi9cbmNvbnN0IEZyb2ZmY2FudmFzID0gZnVuY3Rpb24oXG5cdFx0cGFuZWxTZWxlY3RvciA9ICcuanMtZnItb2ZmY2FudmFzJyxcblx0XHR0b2dnbGVTZWxlY3RvciA9ICcuanMtZnItb2ZmY2FudmFzLXRvZ2dsZScsXG5cdFx0e1xuXHRcdFx0YWN0aXZlUGFuZWxDbGFzczogYWN0aXZlUGFuZWxDbGFzcyA9ICdmci1vZmZjYW52YXMtLWlzLWFjdGl2ZScsXG5cdFx0XHRyZWFkeUNsYXNzOiByZWFkeUNsYXNzID0gJ2hhcy1mci1vZmZjYW52YXMnXG5cdFx0fSA9IHt9XG5cdCkge1xuXG5cblx0Ly9cdENPTlNUQU5UU1xuXHRjb25zdCBkb2MgPSBkb2N1bWVudDtcblx0Y29uc3QgZG9jRWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuXHQvLyBjb25zdCBodG1sID0gZG9jLmdldEVsZW1lbnRCeVRhZ05hbWUoJ2h0bWwnKTtcblx0Y29uc3QgdHJhbnNpdGlvbkV2ZW50U3ludGF4ID0ge1xuXHRcdHRyYW5zaXRpb246ICd0cmFuc2l0aW9uZW5kJyxcblx0XHRXZWJraXRUcmFuc2l0aW9uOiAnd2Via2l0VHJhbnNpdGlvbkVuZCcsXG5cdFx0TW96VHJhbnNpdGlvbjogJ3RyYW5zaXRpb25lbmQnLFxuXHRcdE9UcmFuc2l0aW9uOiAnb1RyYW5zaXRpb25FbmQgb3RyYW5zaXRpb25lbmQnXG5cdH07XG5cblxuXHQvL1x0U1VQUE9SVFNcblx0aWYgKCEncXVlcnlTZWxlY3RvcicgaW4gZG9jdW1lbnQgfHwgISdhZGRFdmVudExpc3RlbmVyJyBpbiB3aW5kb3cgfHwgIWRvY0VsLmNsYXNzTGlzdCkgcmV0dXJuO1xuXG5cblx0Ly9cdFNFVFVQXG5cdGxldCBwYW5lbCA9IGRvYy5xdWVyeVNlbGVjdG9yKHBhbmVsU2VsZWN0b3IpO1xuXHRsZXQgdG9nZ2xlID0gZG9jLnF1ZXJ5U2VsZWN0b3IodG9nZ2xlU2VsZWN0b3IpO1xuXHRsZXQgdHJhbnNpdGlvbkV2ZW50TmFtZSA9ICd0cmFuc2l0aW9uZW5kJztcblx0bGV0IGRvY092ZXJmbG93ID0ge307XG5cblxuXHQvL1x0VVRJTFNcblx0ZnVuY3Rpb24gX2RlZmVyIChmdW5jKSB7XG5cdFx0Ly9cdHdyYXBwZWQgaW4gc2V0VGltZW91dCB0byBkZWxheSBiaW5kaW5nIHVudGlsIHByZXZpb3VzIHJlbmRlcmluZyBoYXMgY29tcGxldGVkXG5cdFx0aWYgKHR5cGVvZiBmdW5jID09PSAnZnVuY3Rpb24nKSBzZXRUaW1lb3V0KGZ1bmMsIDApO1xuXHR9XG5cdGZ1bmN0aW9uIF9jbG9zZXN0IChlbCwgZm4pIHtcblx0XHQvLyBjbG9zZXN0OiBodHRwOi8vY2x1Ym1hdGUuZmkvanF1ZXJ5cy1jbG9zZXN0LWZ1bmN0aW9uLWFuZC1wdXJlLWphdmFzY3JpcHQtYWx0ZXJuYXRpdmVzL1xuXHRcdHJldHVybiBlbCAmJiAoZm4oZWwpID8gZWwgOiBfY2xvc2VzdChlbC5wYXJlbnROb2RlLCBmbikpO1xuXHR9XG5cdGZ1bmN0aW9uIF9nZXRQcm9wVmFsdWUgKGVsLCBwcm9wKSB7XG5cdFx0Ly9cdHJldHVybiBjc3MgcHJvcGVydHkgdmFsdWVcblx0XHRyZXR1cm4gZG9jLmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZWwsIG51bGwpLmdldFByb3BlcnR5VmFsdWUocHJvcCk7XG5cdH1cblxuXG5cdC8vXHRDcm9zcy1icm93c2VyXG5cdGZ1bmN0aW9uIF9zZXRUcmFuc2l0aW9uRXZlbnRQcmVmaXggKCkge1xuXHRcdC8vXHRsb29wIHRocm91Z2ggcHJlZml4ZXMgYW5kIHJldHVybiByZWxldmFudCBldmVudFxuXHRcdGZvciAodmFyIHByZWZpeCBpbiB0cmFuc2l0aW9uRXZlbnRTeW50YXgpIHtcblx0XHRcdGlmIChwYW5lbC5zdHlsZVtwcmVmaXhdICE9PSB1bmRlZmluZWQpIHJldHVybiB0cmFuc2l0aW9uRXZlbnRTeW50YXhbcHJlZml4XTtcblx0XHR9XG5cdH1cblx0ZnVuY3Rpb24gX3NldERvY092ZXJmbG93UHJvcGVydHkgKCkge1xuXHRcdC8vXHRzYXZlIGRvY3VtZW50IG92ZXJmbG93IHByb3BlcnRpZXMgdG8gYXBwbHkgd2hlbiBjbG9zaW5nIHBhbmVsXG5cdFx0ZG9jT3ZlcmZsb3cub3ZlcmZsb3cgPSBfZ2V0UHJvcFZhbHVlKGRvY0VsLCAnb3ZlcmZsb3cnKTtcblx0XHRkb2NPdmVyZmxvdy5vdmVyZmxvd1kgPSBfZ2V0UHJvcFZhbHVlKGRvY0VsLCAnb3ZlcmZsb3cteScpO1xuXHR9XG5cblxuXHQvL1x0QTExeVxuXHRmdW5jdGlvbiBfYWRkQTExeSAoKSB7XG5cdFx0Ly9cdGFkZCBhcmlhLWhpZGRlbiBhdHRyaWJ1dGVcblx0XHRwYW5lbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgdHJ1ZSk7XG5cdH1cblx0ZnVuY3Rpb24gX3JlbW92ZUExMXkgKCkge1xuXHRcdC8vXHRhZGQgYXJpYS1oaWRkZW4gYXR0cmlidXRlXG5cdFx0cGFuZWwucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWhpZGRlbicpO1xuXHR9XG5cblxuXHQvL1x0RXZlbnRzXG5cdGZ1bmN0aW9uIF9ldmVudFBvaW50ZXIgKCkge1xuXHRcdGxldCBwYW5lbEhpZGRlbiA9IHBhbmVsLmdldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKSA9PT0gJ3RydWUnO1xuXHRcdGlmIChwYW5lbEhpZGRlbikge1xuXHRcdFx0X3Nob3dQYW5lbCgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRfaGlkZVBhbmVsKCk7XG5cdFx0fVxuXHR9XG5cdGZ1bmN0aW9uIF9ldmVudERvY0NsaWNrIChlKSB7XG5cdFx0Ly9cdGNoZWNrIGlmIHRhcmdldCBpcyBwYW5lbCBvciBjaGlsZCBvZlxuXHRcdGxldCBpc1BhbmVsID0gZS50YXJnZXQgPT0gcGFuZWw7XG5cdFx0bGV0IGlzUGFuZWxDaGlsZCA9IF9jbG9zZXN0KGUudGFyZ2V0LCAoZWwpID0+IHtcblx0XHRcdGlmIChlbCAhPSBkb2MpIHJldHVybiBlbC5jbGFzc0xpc3QuY29udGFpbnMocGFuZWxTZWxlY3Rvci5zdWJzdHJpbmcoMSkpO1xuXHRcdH0pO1xuXHRcdGlmICghaXNQYW5lbCAmJiAhaXNQYW5lbENoaWxkKSBfaGlkZVBhbmVsKCk7XG5cdH1cblx0ZnVuY3Rpb24gX2V2ZW50RG9jS2V5IChlKSB7XG5cdFx0Ly9cdGVzYyBrZXlcblx0XHRpZiAoZS5rZXlDb2RlID09PSAyNykgX2hpZGVQYW5lbCgpO1xuXHR9XG5cdGZ1bmN0aW9uIF9ldmVudFRyYW5zaXRpb25FbmQgKGUpIHtcblx0XHQvL1x0c2V0IHZpc2liaWx0eSBwcm9wZXJ0eSB0byByZW1vdmUga2V5Ym9hcmQgYWNjZXNzXG5cdFx0cGFuZWwuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuXHRcdC8vXHR0cmFuc2l0aW9uIGV2ZW50IG5vdCBuZWVkZWRcblx0XHRfdW5iaW5kVHJhbnNpdGlvbkVuZCgpO1xuXHR9XG5cblxuXHQvL1x0QmluZGluZ3Ncblx0ZnVuY3Rpb24gX2JpbmRQb2ludGVyICgpIHtcblx0XHR0b2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfZXZlbnRQb2ludGVyKTtcblx0fVxuXHRmdW5jdGlvbiBfYmluZERvY0NsaWNrICgpIHtcblx0XHRkb2MuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfZXZlbnREb2NDbGljayk7XG5cdH1cblx0ZnVuY3Rpb24gX2JpbmREb2NLZXkgKCkge1xuXHRcdGRvYy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgX2V2ZW50RG9jS2V5KTtcblx0fVxuXHRmdW5jdGlvbiBfYmluZFRyYW5zaXRpb25FbmQgKCkge1xuXHRcdHBhbmVsLmFkZEV2ZW50TGlzdGVuZXIodHJhbnNpdGlvbkV2ZW50TmFtZSwgX2V2ZW50VHJhbnNpdGlvbkVuZCk7XG5cdH1cblxuXHQvL1x0VW5iaW5kXG5cdGZ1bmN0aW9uIF91bmJpbmRQb2ludGVyICgpIHtcblx0XHR0b2dnbGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfZXZlbnRQb2ludGVyKTtcblx0fVxuXHRmdW5jdGlvbiBfdW5iaW5kRG9jQ2xpY2sgKCkge1xuXHRcdGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIF9ldmVudERvY0NsaWNrKTtcblx0fVxuXHRmdW5jdGlvbiBfdW5iaW5kRG9jS2V5ICgpIHtcblx0XHRkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIF9ldmVudERvY0tleSk7XG5cdH1cblx0ZnVuY3Rpb24gX3VuYmluZFRyYW5zaXRpb25FbmQgKCkge1xuXHRcdHBhbmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodHJhbnNpdGlvbkV2ZW50TmFtZSwgX2V2ZW50VHJhbnNpdGlvbkVuZCk7XG5cdH1cblxuXG5cdC8vXHRBY3Rpb25zXG5cdGZ1bmN0aW9uIF9zaG93UGFuZWwgKCkge1xuXHRcdC8vXHRyZW1vdmUgYXJpYS1oaWRkZW4sIGFkZCBmb2N1c1xuXHRcdHBhbmVsLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCBmYWxzZSk7XG5cdFx0cGFuZWwuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsIDApO1xuXHRcdHBhbmVsLmZvY3VzKCk7XG5cdFx0Ly9cdHNldCB2aXNpYmlsaXR5IHRvIG92ZXJyaWRlIGFueSBwcmV2aW91cyBzZXQgc3R5bGVcblx0XHRwYW5lbC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuXHRcdC8vXHRiaW5kIGRvY3VtZW50IGNsb3NlIGV2ZW50c1xuXHRcdF9kZWZlcihfYmluZERvY0NsaWNrKTsgLy8gdGhpcyBpc24ndCB3b3JraW5nIGZvciBlbnRlciwgd29ya3MgZm9yIHNwYWNlIHRob3VnaC4gV1RGLlxuXHRcdF9kZWZlcihfYmluZERvY0tleSk7XG5cdFx0Ly9cdGFkZCBhY3RpdmUgY2xhc3Ncblx0XHRwYW5lbC5jbGFzc0xpc3QuYWRkKGFjdGl2ZVBhbmVsQ2xhc3MpO1xuXHRcdC8vXHRmaXggb3ZlcmZsb3cgdG8gcmVtb3ZlIHNjcm9sbCB3aGVuIGNvdmVyaW5nIHRoZSBlbnRpcmUgdmlld3BvcnRcblx0XHRfaGlkZURvY092ZXJmbG93KCk7XG5cdH1cblx0ZnVuY3Rpb24gX2hpZGVQYW5lbCAoKSB7XG5cdFx0Ly9cdGFkZCBhcmlhLWhpZGRlbiwgcmVtb3ZlIGZvY3VzXG5cdFx0cGFuZWwuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsIHRydWUpO1xuXHRcdHBhbmVsLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAtMSk7XG5cdFx0cGFuZWwuYmx1cigpO1xuXHRcdC8vXHRiaW5kIHRyYW5zaXRpb24gZW5kXG5cdFx0X2JpbmRUcmFuc2l0aW9uRW5kKCk7XG5cdFx0Ly9cdHVuYmluZCBkb2N1bWVudCBldmVudHNcblx0XHRfdW5iaW5kRG9jS2V5KCk7XG5cdFx0X3VuYmluZERvY0NsaWNrKCk7XG5cdFx0Ly9cdHJlbW92ZSBhY3RpdmUgY2xhc3Ncblx0XHRwYW5lbC5jbGFzc0xpc3QucmVtb3ZlKGFjdGl2ZVBhbmVsQ2xhc3MpO1xuXHRcdC8vXHRmaXggb3ZlcmZsb3cgdG8gcmVtb3ZlIHNjcm9sbCB3aGVuIGNvdmVyaW5nIHRoZSBlbnRpcmUgdmlld3BvcnRcblx0XHRfcmVzZXREb2NPdmVyZmxvdygpO1xuXHR9XG5cdGZ1bmN0aW9uIGRlc3Ryb3kgKCkge1xuXHRcdC8vXHRyZW1vdmUgYXR0cmlidXRlc1xuXHRcdF9yZW1vdmVBMTF5KCk7XG5cdFx0Ly9cdHVuYmluZCBldmVudHNcblx0XHRfdW5iaW5kUG9pbnRlcigpO1xuXHRcdF91bmJpbmREb2NDbGljaygpO1xuXHRcdF91bmJpbmREb2NLZXkoKTtcblx0XHQvL1x0cmVtb3ZlIHJlZmVyZW5jZVxuXHRcdGRvY0VsLmNsYXNzTGlzdC5yZW1vdmUocmVhZHlDbGFzcyk7XG5cdH1cblx0ZnVuY3Rpb24gX3Jlc2V0RG9jT3ZlcmZsb3cgKCkge1xuXHRcdC8vXHRsb29wIHRocm91Z2ggb3ZlcmZsb3cgcHJvcGVydGllcyBhbmQgc2V0IHZhbHVlXG5cdFx0Zm9yICh2YXIgcHJvcCBpbiBkb2NPdmVyZmxvdykge1xuXHRcdFx0ZG9jRWwuc3R5bGVbcHJvcF0gPSBkb2NPdmVyZmxvd1twcm9wXTtcblx0XHR9XG5cdH1cblx0ZnVuY3Rpb24gX2hpZGVEb2NPdmVyZmxvdyAoKSB7XG5cdFx0Ly9cdHByZXZlbnQgc2Nyb2xsaW5nIGRvY3VtZW50IHdoZW4gcGFuZWwgb3BlblxuXHRcdGRvY0VsLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG5cdH1cblxuXG5cdC8vXHRJTklUXG5cdGZ1bmN0aW9uIF9pbml0ICgpIHtcblx0XHRpZiAocGFuZWwpIHtcblx0XHRcdF9hZGRBMTF5KCk7XG5cdFx0XHRfYmluZFBvaW50ZXIoKTtcblx0XHRcdF9zZXRUcmFuc2l0aW9uRXZlbnRQcmVmaXgoKTtcblx0XHRcdF9zZXREb2NPdmVyZmxvd1Byb3BlcnR5KCk7XG5cdFx0XHRkb2NFbC5jbGFzc0xpc3QuYWRkKHJlYWR5Q2xhc3MpO1xuXHRcdH1cblx0fVxuXHRfaW5pdCgpO1xuXG5cblx0Ly8gUkVWRUFMIEFQSVxuXHRyZXR1cm4ge1xuXHRcdGRlc3Ryb3lcblx0fVxufVxuXG5cbi8vIG1vZHVsZSBleHBvcnRzXG5leHBvcnQgZGVmYXVsdCBGcm9mZmNhbnZhcztcbiJdfQ==
